function cloudfw_init(){"use strict";jQuery(document).delegate(".cloudfw-upgrade-theme","click",function(e){var t=jQuery(this);return t.hasClass("apply")?void 0:(CloudFw_UI.sure.init({content:"Are you sure you want to upgrade "+CloudFwOp.themeName+" to the latest version? <br/><br/> Make sure backup your files if you had made change on the theme files.",texts:{sure:"Upgrade"},button_color:{sure:"green"},resume:function(){window.location.href=t.attr("href")},cancel:function(e){t.removeClass("apply"),e.close()}}),e.preventDefault(),!1)}),jQuery(document).delegate(".cloudfw-action-duplicate","click",function(e){var t=jQuery(this),a=t.attr("data-target"),i=a?jQuery(a):t.parent().children("ul").first(),r=i.children(),o=(r.length,r.first().clone().appendTo(i));cloudfw_reset_elements(o)}),jQuery(document).delegate(".cloudfw-action-only-duplicate","click",function(e){var t=jQuery(this),a=(t.attr("data-target"),t.parents("li").first()),i=a.clone().insertAfter(a),r=i.find("input.randomizer");r.length&&r.each(function(){var e=jQuery(this);e.val(cloudfw_randomizer(e.attr("data-length"),e.attr("data-prefix"),e.attr("data-chars")))}),cloudfw_main(i)}),jQuery(document).delegate(".cloudfw-action-remove","click",function(e){var t=jQuery(this);if(!t.hasClass("apply"))return CloudFw_UI.sure.init({resume:function(){t.addClass("apply").click()},cancel:function(e){t.removeClass("apply"),e.close()}}),e.preventDefault(),!1;t.removeClass("apply");var a=t.attr("data-target"),i=t.parents(""+a).first(),r=i.parent(),o=r.children(),u=o.length;if(jQuery(i).removeData(),jQuery("*",i).removeData(),u>1)i.remove();else if(1==u){var n=o.first().clone().appendTo(r);cloudfw_reset_elements(n),i.remove()}jQuery(".tipsy").remove()}),jQuery(document).delegate(".cloudfw-action-clone","click",function(e){var t=jQuery(this),a=t.parents("li").first(),i=(a.parent(),a.clone());a.after(i),cloudfw_main(i),jQuery(".tipsy").remove()}),jQuery(document).delegate(".cloudfw-action-edit","click",function(e){var t=jQuery(this),a=t.parents("li").first(),i=a.find(".gallery-item"),r=i.data("unique_key");r||(r=cloudfw_randomizer(10,"sidebar-","AZ-az"),i.data("unique_key",r));CloudFw_UI.modal({destroy:!1,overlay:!0,minimize:!1,compact:!0,width:802,id:"cloudfw-gallery-edit",title:"Gallery Item",content:function(e){i.wrap('<div id="'+r+'-cloudfw-placeholder" />'),jQuery(".cloudfw-ui-modal-box-content",e).html("");var t=i.clone();i.appendTo(jQuery(".cloudfw-ui-modal-box-content",e)).show(),jQuery("#"+r+"-cloudfw-placeholder").html(t)},before_close:function(){jQuery("#"+r+"-cloudfw-placeholder").html(""),i.appendTo(jQuery("#"+r+"-cloudfw-placeholder")).hide().unwrap()}});e.preventDefault()}),jQuery(document).delegate(".cloudfw-action-gallery-from-library","click",function(e){var t=jQuery(this),a=t.attr("data-target"),i=a?jQuery(a):t.parent().children("ul").first(),r=t.prev(".cloudfw-action-duplicate");e.preventDefault();var o;jQuery("input#post_ID").val();return o?void o.open():(o=wp.media.frames.file_frame=wp.media({filterable:"eml",button:{text:jQuery(this).data("uploader_button_text")},multiple:!0,states:[new wp.media.controller.Library({multiple:!0,priority:20,filterable:"eml"})]}),o.on("select",function(){var e=o.state().get("selection");e.map(function(e){e=e.toJSON();var t=i.children().last(),a=jQuery(".gallery-preview",t).attr("data-sync"),o=jQuery("#"+a,t);""!=o.val()&&(r.click(),t=i.children().last(),a=jQuery(".gallery-preview",t).attr("data-sync"),o=jQuery("#"+a,t)),o.val(e.url).change()})}),void o.open())}),jQuery(document).delegate(".slider-live-preview","click",function(e){jQuery(this).find(".slider-input").is(":visible")||(jQuery(this).find(".slider-input").show().find("input").focus().select(),jQuery(this).find(".cloudfw-tooltip").hide(),jQuery(".tipsy").remove())}),jQuery(document).delegate(".slider-input > input","focusout",function(e){jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".cloudfw-tooltip").show()}),jQuery(document).delegate(".slider-input > input","keydown keyup",function(e){(13==e.which||27==e.which)&&(jQuery(this).blur().focusout(),e.preventDefault())}),jQuery(document).delegate("#slider_form, .sending_form, .slider_forms","submit",function(){var e=jQuery(this);if(e.hasClass("disabled"))return!1;e.addClass("disabled");e.find('input[name="slider_image"]').val(),e.find('input[name="slider_video"]').val();e.find(":submit").each(function(){jQuery(this).__sending()})}),jQuery(document).delegate("form#sorting_form","submit",function(e){var t=(jQuery(this),jQuery(this));if(t.hasClass("disabled"))return!1;t.find("#update_identifier").remove(),jQuery(t).trigger("ajaxPreSend",[t]);var a={action:"cloudfw_save_changes",nonce:CloudFwOp.cloudfw_nonce,no_form:"1"};return jQuery.ajax({url:CloudFwOp.ajaxUrl,cache:!1,type:"POST",data:jQuery.param(a,!0)+"&"+t.serialize(),success:function(e){try{var a=jQuery.parseJSON(e);cloudfw_dialog(a.messageTitle,a.messageText,a.messageCase)}catch(i){t.html(e)}jQuery(t).trigger("ajaxCallback",[t,e]),cloudfw_destroy()}}),!1}),jQuery(document).delegate(".cloudfw-ui-route","click",function(e){var t=jQuery(this),a=t.attr("title");return prompt("Route",a),!1}),jQuery.expr[":"].Search=function(e,t,a){return jQuery(e).val().toUpperCase().indexOf(a[3].toUpperCase())>=0},jQuery(document).delegate(".cloudfw-ui-label-check","click",function(e){if("A"!=e.target.nodeName){e.stopPropagation(),e.preventDefault();var t=jQuery(this),a=t.find(":checkbox").first();a.is(":checked")?(a.prop("checked",!1),t.removeClass("c_on")):(a.prop("checked",!0),t.addClass("c_on")),a.change()}}),jQuery(document).delegate(".cloudfw-ui-label-radio","click",function(e){if("A"!=e.target.nodeName){e.stopPropagation(),e.preventDefault();var t=jQuery(this),a=(t.parent(),t.find(":radio").first()),i=jQuery("input[name="+a.attr("name")+"]:radio");a.prop("checked",!0),jQuery(i).each(function(){var e=jQuery(this);e.parent("label").removeClass("r_on")}),t.addClass("r_on"),a.change()}}),jQuery(document).delegate(".module-set-closable > .module-set-header > h3","click",function(){var e=jQuery(this),t=e.parents(".module-set").first(),a=t.find(".module-content").first(),i=t.hasClass("module-set-group");t.hasClass("module-set-state-closed")?(a.show(),t.removeClass("module-set-state-closed").addClass("module-set-state-opened"),i&&t.parents("ul").first().find(".module-set").not(t).each(function(){jQuery(this).removeClass("module-set-state-opened").addClass("module-set-state-closed").find(".module-content").hide()}),cloudfw_destroy()):(a.hide(),t.removeClass("module-set-state-opened").addClass("module-set-state-closed"),cloudfw_destroy())}),jQuery(document).delegate(".cloudfw-ui-page-select","click",function(){var e=jQuery(this),t=e.parents(".cloudfw-ui-page-select-container"),a=t.find(".cloudfw-ui-page-select-input"),i=t.find(".cloudfw-ui-page-select-preview"),r=e.attr("data-response"),o=e.attr("data-preview"),u=e.attr("data-filter"),n=function(e,t,l,d){jQuery("#cloudfw-ui-page-select-search",t).on("keydown keyup",function(){var e=jQuery(this),a=e.val(),i=jQuery("#cloudfw-ui-page-select-list",t);if(""===a)return i.find("li").show(),i.find("li").length&&jQuery(".cloudfw-ui-not-found-text",t).hide(),!0;var r=i.find("li #data-title"),o=r.filter(":Search('"+a+"')");i.find("li").hide(),o.length>0?(o.each(function(){var e=jQuery(this);e.parents("li").first().show()}),jQuery(".cloudfw-ui-not-found-text",t).hide()):jQuery(".cloudfw-ui-not-found-text",t).show()}),e.success(d);var c=jQuery("#cloudfw-ui-page-select-list > li",t),s=c.find(".use");s.on("click",function(t){t.preventDefault();var u=jQuery(this).parents("li").first(),n=u.find("#data-ID").val(),l=u.find("#data-title").val(),d=u.find("#data-permalink").val();if("URL"==r)var c=d,l=d;else if("ID"==r||"id"==r)var c=n;else var c=l+"||"+d;a.val(c).trigger("change"),o&&i.length&&(i.find(".cloudfw-ui-page-select-title").text(l).attr("href",d),i.find(".cloudfw-ui-page-select-permalink").text(d),i.show(),a.hide()),e.close()}),jQuery("[data-page]",t).on("click",function(a){var i={action:"cloudfw_post_list_for_selector",nonce:CloudFwOp.cloudfw_nonce,filter:u,page:jQuery(this).attr("data-page")};e.loading("show"),jQuery.ajax({url:CloudFwOp.ajaxUrl,cache:!1,type:"POST",data:jQuery.param(i,!0),success:function(a){e.loading("close"),n(e,t,l,a),cloudfw_main()}})})},l=CloudFw_UI.modal({destroy:!1,overlay:!1,minimize:!1,id:"cloudfw-box-page-selector",title:"Select Page",loader:!0,content:function(e,t){var a={action:"cloudfw_post_list_for_selector",nonce:CloudFwOp.cloudfw_nonce,filter:u};jQuery.ajax({url:CloudFwOp.ajaxUrl,cache:!1,type:"POST",data:jQuery.param(a,!0),success:function(a){var i='<div class="modal-toolbar-search"><input id="cloudfw-ui-page-select-search" type="text" value="" class="input input_200" autocomplete="off" placeholder="type to search" /></div>';l.toolbar_option(i),n(l,e,t,a),cloudfw_main()}})}})}),jQuery(document).delegate(".cloudfw-ui-page-select-reset","click",function(){var e=jQuery(this);e.parent().hide().next("input").val("").show()});setInterval(function(){jQuery(".timer_hide").fadeOut(function(){jQuery(this).remove()})},8e3);shortcut.add("Ctrl+S",function(){jQuery(".ctrl_s_form").each(function(){var e=jQuery(this),t=e.children(".ui-tabs-panel"),a=t.length,i=!1;a>1?t.each(function(){return jQuery(this).is(":visible")?(i=!0,!0):void 0}):1==a?t.first().is(":visible")&&(i=!0):e.is(":visible")&&(i=!0),i&&e.submit()})},{type:"keydown",propagate:!1,target:document}),jQuery(document).ajaxStart(function(e,t,a){jQuery(".tipsy").remove()}),jQuery(document).delegate(".cloudfw-help","click",function(e){var t=jQuery(this).attr("rel"),a=jQuery(this).attr("width"),i=jQuery(this).attr("title");if("s"===a||""===a)var a=300;else if("m"===a)var a=600;else if("l"===a)var a=900;""==i&&(i="Help");CloudFw_UI.modal({destroy:!0,overlay:!0,minimize:!1,compact:!0,width:a,title:i,content:function(e){jQuery("#"+t).wrap('<div id="'+t+'-cloudfw-placeholder" />'),jQuery(".cloudfw-ui-modal-box-content",e).html(""),jQuery("#"+t).appendTo(jQuery(".cloudfw-ui-modal-box-content",e)).show()},before_close:function(){jQuery("#"+t).appendTo(jQuery("#"+t+"-cloudfw-placeholder")).hide().unwrap()}});e.preventDefault()}),jQuery(document).delegate(".cloudfw-ui-confirm","click",function(e){var t=jQuery(this);if(!t.hasClass("apply"))return CloudFw_UI.sure.init({compact:!0,content:t.attr("data-content")||"Do you want to delete the item?",resume:function(){t.addClass("apply").click()},cancel:function(e){t.removeClass("apply"),e.close()}}),!1;var a=t.attr("href");"undefined"!=typeof a&&"javascript:;"!=a&&"javascript:void(0);"!=a&&"#"!=a&&(window.location.href=t.attr("href"))}),jQuery(document).delegate(".ajax_form","submit",function(e){var t=jQuery(this);if(t.hasClass("disabled"))return!1;cloudfw_global_loading("show"),t.find("#update_identifier").remove(),t.addClass("disabled"),t.find(":submit").each(function(){jQuery(this).__sending()}),t.find("#save_apply").parent("div").hide(),jQuery(t).trigger("ajaxPreSend",[t]);var a={action:"cloudfw_save_changes",nonce:CloudFwOp.cloudfw_nonce};jQuery.ajax({url:CloudFwOp.ajaxUrl,cache:!1,type:"POST",data:jQuery.param(a,!0)+"&"+t.serialize(),success:function(e){try{var a=jQuery.parseJSON(e);t.find(":submit").each(function(){jQuery(this).__sending().success()}),cloudfw_dialog(a.messageTitle,a.messageText,a.messageCase),a.slider_id&&(t.find("input#slider_id").length>0?t.find("input#slider_id").val(a.slider_id):t.prepend('<input type="hidden" id="slider_id" name="slider_id" value="'+a.slider_id+'" />'),t.find(":submit").val(CloudFwOp.textUpdate).attr("data-old-val",CloudFwOp.textUpdate)),jQuery(t).trigger("ajaxCallback",[t,e])}catch(i){alert(e),t.find(":submit").each(function(){jQuery(this).__sending().error()}),cloudfw_dialog("We couldn't save :(","An error occurred when saving changes","error")}cloudfw_global_loading("hide"),cloudfw_destroy()}}),e.preventDefault(),e.stopPropagation()}),jQuery(document).delegate(".select-icon","click",function(e){e.preventDefault();var t=jQuery(this);t.find("img").length?t.parent().find(".library-icon-handler").click():t.parent().find(".font-icon-handler").click()}),jQuery(document).delegate(".cloudfw_sub_navigation_items a","click",function(){jQuery(document).trigger("click"),cloudfw_destroy()}),jQuery(document).delegate(".remove-icon","click",function(e){var t=jQuery(this).parent("div");t.addClass("empty"),t.find("input").val(""),t.find("i").remove(),t.find("img").remove(),e.preventDefault()}),jQuery(document).delegate(".remove-icon-handler","click",function(){var e=jQuery(this).parents(".wrap-icons").first(),t=e.find(".remove-icon");t.click()}),jQuery(document).delegate(".custom-icon-handler","click",function(e){var t=jQuery(this).parents(".wrap-icons").first(),a=t.find(".select-icon"),i=t.find("input"),r=t.find("img"),o=(i.val(),r.attr("src")),u=r.attr("data-at2x");CloudFw_UI.modal({id:"ui-custom-icon",loader:!0,dummy:!0,destroy:!1,overlay:!1,minimize:!1,compact:!0,width:400,title:"Custom Icon URL",content:function(e,r,n){var l="";if(l+='<div style="margin-top: 12px;">',l+="	<div><strong>Normal Image:</strong></div>",l+='	<div class="cloudfw-ui-uploader-container cloudfw-ui-uploader-no-value"><div class="minimal-upload"><input type="text" id="cloudfw-ui-icon-custom" value="" autocomplete="off" class="cloudfw-ui-uploader-input input" data-path="" style="width: 309px;" /><div id="file-uploader" class="cloudfw-ui-uploader" data-path="" data-remove-button="" data-library-button="" data-store=""><noscript><p>Please enable JavaScript to use file uploader.</p></noscript></div></div></div>',l+="</div>",l+='<div style="margin-top: 12px;">',l+="	<div><strong>Retina Image:</strong></div>",l+='	<div class="cloudfw-ui-uploader-container cloudfw-ui-uploader-no-value"><div class="minimal-upload"><input type="text" id="cloudfw-ui-icon-custom-retina" value="" autocomplete="off" class="cloudfw-ui-uploader-input input" data-path="" style="width: 309px;" /><div id="file-uploader" class="cloudfw-ui-uploader" data-path="" data-remove-button="" data-library-button="" data-store=""><noscript><p>Please enable JavaScript to use file uploader.</p></noscript></div></div></div>',l+="</div>",l+='<div style="margin-top: 6px; position: relative;">',l+='	<button type="submit" id="cloudfw-ui-icon-custom-done" href="javascript:;" class="small-button small-sky"><span>Done</span></button>',l+="</div>",n.success(l),cloudfw_main(r),jQuery(".cloudfw-dummy-form",r).submit(function(e){e.preventDefault();var o="",u=jQuery("#cloudfw-ui-icon-custom",r).val(),l=jQuery("#cloudfw-ui-icon-custom-retina",r).val();if(o=""!=u&&""!=l?u+"||"+l:u,""!=o){i.val(o);var d=jQuery("<img />").attr("src",u).attr("data-at2x",l);a.find("img").remove(),a.find("i").remove(),a.append(d),t.removeClass("empty")}n.close()}),o){var d=new Image;d.onload=function(){jQuery("#cloudfw-ui-icon-custom",r).val(o).focus().select(),jQuery("#cloudfw-ui-icon-custom-retina",r).val(u)},d.onerror=function(){jQuery("#cloudfw-ui-icon-custom",r).val("").focus().select(),jQuery("#cloudfw-ui-icon-custom-retina",r).val("")},d.src=o}else jQuery("#cloudfw-ui-icon-custom",r).val("").focus().select(),jQuery("#cloudfw-ui-icon-custom-retina",r).val("")},before_close:function(){}});e.preventDefault()}),jQuery(document).delegate(".library-icon-handler","click",function(e){var t=jQuery(this).parents(".wrap-icons").first(),a=t.find(".select-icon"),i=a.find(".ui--icon"),r=t.find("input");r.val(),t.find("img"),CloudFw_UI.modal({id:"ui-custom-library-icon",loader:!0,dummy:!0,destroy:"#ui-custom-font-icon",overlay:!1,minimize:!0,compact:!0,width:700,title:"Icon Library",content:function(e,o,u){var n={action:"cloudfw_get_library_icons",icon:r.val(),nonce:CloudFwOp.cloudfw_nonce};jQuery.ajax({url:CloudFwOp.ajaxUrl,cache:!1,type:"POST",data:jQuery.param(n,!0),success:function(n){var l='<div style="margin: 4px 35px 0 0;"><input id="cloudfw-ui-modal-search" type="text" value="" class="input input_200" autocomplete="off" placeholder="type to search" /></div>';u.toolbar_option(l),jQuery("#cloudfw-ui-modal-search",e).on("keydown keyup",jQuery.throttle(500,function(){var e=jQuery(this),t=e.val(),a=jQuery(".library-icons-set",o);if(""===t)return a.find(".cloudfw-ui-label-radio").show(),a.find(".cloudfw-ui-label-radio").length&&(jQuery("#ui-icon-library",o).show(),jQuery(".cloudfw-ui-not-found-text",o).hide()),!0;var i=a.find(".cloudfw-ui-label-radio input"),r=i.filter(":Search('"+t+"')");a.find(".cloudfw-ui-label-radio").hide(),r.length>0?(r.each(function(){var e=jQuery(this);e.parents(".cloudfw-ui-label-radio").first().show()}),jQuery("#ui-icon-library",o).show(),jQuery(".cloudfw-ui-not-found-text",o).hide()):(jQuery("#ui-icon-library",o).hide(),jQuery(".cloudfw-ui-not-found-text",o).show())})),u.success(n),cloudfw_main();var d=jQuery("#icon_set_selector",o);d.change(function(){var e=jQuery(this).val();jQuery(".library-icons-set",o).hide(),""!=e&&jQuery("#"+e,o).show()});var c=jQuery("input[name=library_icon]:checked",o),s=c.parents(".library-icons-set").first().attr("id");s&&(d.find("option[value="+s+"]").prop("selected",!0),d.change(),c.focus()),jQuery(".cloudfw-dummy-form",o).submit(function(e){e.preventDefault();var n=jQuery("input[name=library_icon]:checked",o),l=n.parent("label"),d=l.find("img").first(),c=n.val(),s="";c&&(i.remove(),s+=c,r.val(s),a.find("img").remove(),a.find("i").remove(),d.clone().appendTo(a),t.removeClass("empty")),u.close()}),jQuery(".cloudfw-ui-label-radio",o).bind("dblclick",function(e){e.stopPropagation(),e.preventDefault(),jQuery(".cloudfw-dummy-form",o).submit()})}})},before_close:function(){}});e.preventDefault()}),jQuery(document).delegate(".font-icon-handler","click",function(e){var t=jQuery(this).parents(".wrap-icons").first(),a=t.find(".select-icon"),i=a.find("i"),r=t.find("input");r.val(),t.find("img"),CloudFw_UI.modal({id:"ui-custom-font-icon",loader:!0,dummy:!0,destroy:"#ui-custom-library-icon",overlay:!1,minimize:!0,compact:!0,width:700,title:"Vector Icons",content:function(e,o,u){var n={action:"cloudfw_get_font_icons",nonce:CloudFwOp.cloudfw_nonce,allow_customization:t.attr("data-allow-customization")||!1,icon:i.attr("data-icon-class")||"",color:i.attr("data-icon-color")||"",background:i.attr("data-icon-background")||"",size:i.attr("data-icon-size")||"",border_color:i.attr("data-icon-border-color")||"",border_width:i.attr("data-icon-border-width")||"",border_radius:i.attr("data-icon-border-radius")||""};jQuery.ajax({url:CloudFwOp.ajaxUrl,cache:!1,type:"POST",data:jQuery.param(n,!0),success:function(n){var l='<div style="margin: 4px 35px 0 0;"><input id="cloudfw-ui-modal-search" type="text" value="" class="input input_200" autocomplete="off" placeholder="type to search" /></div>';u.toolbar_option(l),jQuery("#cloudfw-ui-modal-search",e).on("keydown keyup",jQuery.throttle(500,function(){var e=jQuery(this),t=e.val(),a=jQuery("#library-font-icons",o);if(""===t)return a.find(".cloudfw-ui-label-radio").show(),a.find(".cloudfw-ui-label-radio").length&&(jQuery("#ui-icon-library",o).show(),jQuery(".cloudfw-ui-not-found-text",o).hide()),!0;var i=a.find(".cloudfw-ui-label-radio input"),r=i.filter(":Search('"+t+"')");a.find(".cloudfw-ui-label-radio").hide(),r.length>0?(r.each(function(){var e=jQuery(this);e.parents(".cloudfw-ui-label-radio").first().show()}),jQuery("#ui-icon-library",o).show(),jQuery(".cloudfw-ui-not-found-text",o).hide()):(jQuery("#ui-icon-library",o).hide(),jQuery(".cloudfw-ui-not-found-text",o).show())})),u.success(n),cloudfw_main(),jQuery("input[name=icon_class]:checked",o).focus(),jQuery(".cloudfw-dummy-form",o).submit(function(e){e.preventDefault();var n=jQuery("input[name=icon_class]:checked",o).val(),l=cloudfw_get_value(jQuery("#icon_size",o)).replace(" px","").replace("px",""),d=cloudfw_get_value(jQuery("#icon_color",o)),c=cloudfw_get_value(jQuery("#icon_background",o)),s=cloudfw_get_value(jQuery("#icon_border_color",o)),f=cloudfw_get_value(jQuery("#icon_border_width",o)),p=cloudfw_check_undefined(jQuery("#icon_border_radius option:checked",o).val()),h="",y="";i.remove(),n&&(h+=n,y=jQuery("<i/>").addClass(n.split("/")[1]).addClass("ui--icon").attr("data-icon-class",n),""!=l&&(h+="||size:"+l+"px",y.css({"font-size":l+"px","min-width":l+"px"}).attr("data-icon-size",l).addClass("icon-inline-block")),""!=d&&(h+="||color:"+d,y.css({color:"#"+d}).attr("data-icon-color",d)),""!=c&&(h+="||background:"+c,y.css({"background-color":"#"+c}).attr("data-icon-background",c).addClass("icon-inline-block icon-with-background")),""!=s&&(h+="||border_color:"+s,y.css({"border-color":"#"+s}).attr("data-icon-border-color",s),""==f&&(f=1)),""!=f&&(h+="||border_width:"+f,y.css({"border-width":f+"px"}).attr("data-icon-border-width",f)),(""!=f||""!=s)&&y.css({"border-style":"solid"}).addClass("icon-inline-block icon-with-background"),""!=p&&(h+="||border_radius:"+p,y.attr("data-icon-border-radius",p).addClass(p)),r.val(h),a.find("img").remove(),a.find("i").remove(),a.append(y),t.removeClass("empty")),u.close()}),jQuery(".cloudfw-ui-label-radio",o).bind("dblclick",function(e){e.stopPropagation(),e.preventDefault(),jQuery(".cloudfw-dummy-form",o).submit()})}})},before_close:function(){}});e.preventDefault()}),jQuery(".cloudfw-update-messages").show().each(function(){jQuery("#appandtohere-nags").length&&jQuery(this).appendTo("#appandtohere-nags").fadeIn()}),jQuery("#setting-error-tgmpa").each(function(){jQuery("#appandtohere-nags").length&&jQuery(this).appendTo("#appandtohere-nags").fadeIn()}),jQuery(document).delegate(".qq-upload-drop-area","mouseleave",function(e){jQuery(".qq-upload-drop-area").hide()}),jQuery(document).delegate(".cloudfw-ui-modal-save-and-close","click",function(e){var t=jQuery(this);t.parents(".cloudfw-ui-modal-box").first().find(".close").click()})}function cloudfw_main(e){if(e){if("undefined"==typeof e.jquery&&(e=jQuery(e)),!e.length)return!0}else e=null;cloudfw_destroy();var t={onShiftEnter:{keepDefault:!1,replaceWith:"<br />\n"},onCtrlEnter:{keepDefault:!1,openWith:"\n<p>",closeWith:"</p>"},onTab:{keepDefault:!1,replaceWith:"    "},markupSet:[{name:"Bold",key:"B",openWith:"(!(<strong>|!|<b>)!)",closeWith:"(!(</strong>|!|</b>)!)"},{name:"Italic",key:"I",openWith:"(!(<em>|!|<i>)!)",closeWith:"(!(</em>|!|</i>)!)"},{name:"Stroke through",openWith:"<del>",closeWith:"</del>"},{separator:"---------------"},{name:"Bulleted List",openWith:"    <li>",closeWith:"</li>",multiline:!0,openBlockWith:"<ul>\n",closeBlockWith:"\n</ul>"},{name:"Numeric List",openWith:"    <li>",closeWith:"</li>",multiline:!0,openBlockWith:"<ol>\n",closeBlockWith:"\n</ol>"},{separator:"---------------"},{name:"Link",key:"L",openWith:'<a href="[![Link:!:http://]!]"(!( title="[![Title]!]")!) target="[![Target:!:_blank]!]">',closeWith:"</a>",placeHolder:"Your text to link..."},{separator:"---------------"},{name:"Clean",className:"clean",replaceWith:function(e){return e.selection.replace(/<(.*?)>/g,"")}}]};jQuery(".cloudfw-ui-editor",e).each(function(){if(cloudfw_jqueried("cloudfw-editor",jQuery(this)))return!0;var e=jQuery(this);e.hasClass("markItUpEditor")&&e.markItUp("remove");e.bind("focus",function(){var a=e.prev(".markItUpHeader");e.hasClass("markItUpEditor")?a.clearQueue().stop().delay(100).queue(function(){jQuery(this).show()}):(e.markItUp(t),a.append('<li class="close"><a href="javascript:;" title="Close">Close</a></li>'),e.focus())}),e.bind("focusout",function(){var t=e.prev(".markItUpHeader");t.clearQueue().stop().delay(300).queue(function(){jQuery(this).hide()})})}),jQuery(".cloudfw-ui-autogrow",e).each(function(){if(cloudfw_jqueried("cloudfw-autogrow",jQuery(this)))return!0;var e=jQuery(this);e.autoGrow()}),jQuery("select[multiple].input",e).each(function(){if(cloudfw_jqueried("cloudfw-asmSelect",jQuery(this)))return!0;var e=jQuery(this);e.asmSelect({addItemTarget:"bottom",animate:!0,highlight:!1,sortable:!0,debug:!0})}),jQuery(".gallery-preview",e).each(function(){if(cloudfw_jqueried("cloudfw-gallery-preview",jQuery(this)))return!0;var e=jQuery(this),t=e.find(".image"),a=e.attr("data-sync"),i=(e.parents("li").first(),e.next(".gallery-item")),r=jQuery("#"+a,i),o=t.find("img").attr("src");r.change(function(){var e=jQuery(this).val();o!==e&&(""!==e?(t.html("Thumbnail Creating..."),cloudfw_image_resize(e,200,120,function(e){e?t.html(jQuery("<img />").attr("src",e)):t.html("")},function(){t.html("")})):t.html(""))}).change()}),jQuery.isFunction(jQuery.fn.tipsy)&&jQuery(".cloudfw-tooltip").each(function(){return cloudfw_jqueried("cloudfw-tooltip",jQuery(this))?!0:void jQuery(this).tipsy({gravity:"s",offset:0})}),jQuery(".cloudfw-ui-label-check input:checked").each(function(){return cloudfw_jqueried("cloudfw-checkbox",jQuery(this))?!0:void jQuery(this).parent("label").addClass("c_on")}),jQuery(".cloudfw-ui-label-radio input:checked").each(function(){return cloudfw_jqueried("cloudfw-radio",jQuery(this))?!0:void jQuery(this).parent("label").addClass("r_on")}),jQuery(".cloudfw-ui-tabs",e).each(function(){if(cloudfw_jqueried("cloudfw-tab",jQuery(this)))return!0;var e={},t={},a=jQuery(this),i=a.attr("rel");t.expires=60,i&&(t.name=i),e.create=function(){cloudfw_tab_loaded(),cloudfw_destroy()},e.select=function(){a.hasClass("cloudfw-ui-mini-tabs")||resetInview(),cloudfw_destroy()};var r=window.location.hash;r||(e.activate=function(e,a){t.name&&jQuery.cookie(t.name,a.newTab.index(),{expires:t.expires})},t.name&&(e.active=jQuery.cookie(t.name)),e.cookie=t),a.tabs(e)}),jQuery(".cloudfw-ui-input",e).each(function(){if(cloudfw_jqueried("cloudfw-input",jQuery(this)))return!0;var e=jQuery(this);e.bind("keydown",function(){clearTimeout(jQuery.data(this,"timer"));var t=setTimeout(function(){e.change()},1e3);jQuery(this).data("timer",t)})}),jQuery(".cloudfw-ui-select",e).each(function(){if(cloudfw_jqueried("cloudfw-select",jQuery(this)))return!0;var e=jQuery(this),t=e.find(".cloudfw-ui-select-title"),a=e.find("select");a.on("change",function(){var a=jQuery(this).find(":selected").first().text();if(""==a){var i=e.attr("data-default-title");if(i)var a=i}t.text(a)}).change(),a.bind("focus",function(){e.addClass("active")}),a.bind("blur",function(){e.removeClass("active")}),e.attr("data-init")&&a.change()}),jQuery(".cloudfw-ui-slider",e).each(function(){function e(e,t,a){if(t)try{var t=jQuery.parseJSON(t);e.parents(".cloudfw-ui-slider-container").find(".cloudfw-ui-slider-container-preview-step").html("").hide(),e.parents(".cloudfw-ui-slider-container").find(".cloudfw-ui-slider-container-preview-value").show(),jQuery.each(t,function(t,i){return t==a?(e.parents(".cloudfw-ui-slider-container").find(".cloudfw-ui-slider-container-preview-step").html(i).show(),e.parents(".cloudfw-ui-slider-container").find(".cloudfw-ui-slider-container-preview-value").hide(),!0):void 0})}catch(i){}}if(cloudfw_jqueried("cloudfw-slider",jQuery(this)))return!0;var t={},a=jQuery(this),i=(a.attr("id"),a.parents(".cloudfw-ui-slider-container").find(".slide")),r=a.parents(".cloudfw-ui-slider-container").find(".amount"),o=a.val(),u=a.attr("data-min"),n=a.attr("data-max"),l=a.attr("data-step"),d=a.attr("data-range"),c=a.attr("data-min-range"),s=a.attr("data-orientation"),f=a.attr("data-steps");t.animate=!0,u&&(t.min=parseFloat(u)),n&&(t.max=parseFloat(n)),l&&(t.step=parseFloat(l)),s&&(t.orientation=s),d?(t.range=!0,t.values=o.split(","),t.slide=function(t,i){a.val(i.values[0]+","+i.values[1]).change(),r.html(i.values[0]+","+i.values[1]),e(a,f,i.values[0]+","+i.values[1])},t.change=t.slide):(c&&(t.range="min"),t.value=parseFloat(o),t.slide=function(t,i){a.val(i.value).change(),r.html(i.value),e(a,f,i.value)},t.change=t.slide),i.slider(t);var p=i.find(".ui-slider-range");if(p.length>1){var h=p.length;p.each(function(e){e!=h-1&&jQuery(this).remove()})}if(a.bind("keyup keydown",function(){clearTimeout(jQuery.data(this,"timer"));var e=setTimeout(function(){if(d){var e=a.val().replace(/[^0-9\.\,\-]/g,"").split(",");i.slider("values",e)}else i.slider("value",a.val().replace(/[^0-9\.\-]/g,""))},400);jQuery(this).data("timer",e),a.change()}),a.bind("blur focus focusout",function(){if(d){var t=i.slider("values");a.val(t[0]+","+t[1]).change(),r.html(t[0]+","+t[1]),e(a,f,t[0]+","+t[1])}else{i.slider("value",a.val().replace(/[^0-9\.\-]/g,""));var o=i.slider("value");r.html(o),e(a,f,o)}}),d){var y=i.slider("values");r.html(y[0]+","+y[1]),e(a,f,y[0]+","+y[1])}else{var m=i.slider("value");r.html(m),e(a,f,m)}}),jQuery(".cloudfw-ui-uploader",e).each(function(){if(cloudfw_jqueried("cloudfw-uploader",jQuery(this)))return!0;var e=jQuery(this),t=(e.attr("id"),e.parents(".cloudfw-ui-uploader-container")),a=t.find(".cloudfw-ui-uploader-input"),i=t.find(".cloudfw-ui-uploader-preview"),r=e.attr("data-path"),o=e.attr("data-remove-button"),u=e.attr("data-edit-button"),n=e.attr("data-library-button"),l=e.attr("data-store");if(o)var d='<div class="qq-upload-button-delete small-button small-grey small-hover-red"><span>'+CloudFwOp.textRemove+"</span></div>";else var d="";if(u)var c='<div class="qq-upload-button-edit"><span>Edit</span></div>';else var c="";if(n)var s='<a href="javascript:;" class="cloudfw-ui-uploader-import small-button small-grey"><span>'+CloudFwOp.textSelecFromLibrary+"</span></a>";else var s="";var f=new qq.FileUploader({element:e[0],action:CloudFwOp.ajaxUrl,debug:!0,onComplete:function(e,o,u){return"undefined"==u.filepath||"undefined"==typeof u.filepath||""==u.filepath?!1:(a.val(u.filepath).change(),i.html("<div class='cloudfw-ui-image-preview'><div class='cloudfw-ui-image-preview-padding'><img src='"+r+u.filepath+"' /></div></div>"),t.find(".qq-upload-button-delete").show(),void cloudfw_destroy())},showMessage:function(e){cloudfw_dialog("An error occurred",e,"error")},template:'<div class="qq-uploader no-list"><div class="qq-upload-drop-area"><span></span></div><div class="qq-upload-button small-button small-grey"><span><strong class="icon"></strong>'+CloudFwOp.textUpload+"</span></div>"+s+c+d+'<ul class="qq-upload-list"></ul></div>'});f.setParams({action:"cloudfw_image_upload",store:l,nonce:CloudFwOp.cloudfw_nonce}),t.find(".qq-upload-button-delete").unbind("click").bind("click",function(){a.val("").change(),i.html(""),jQuery(this).hide()}),a.hasClass("hidden")&&u&&(t.find(".qq-upload-button-edit").unbind("click").bind("click",function(){a.fadeIn().focus()}),a.bind("blur focusout",function(){a.fadeOut()})),""==a.val()?(t.find(".qq-upload-button-delete").hide(),t.find(".cloudfw-ui-image-preview").hide()):(t.find(".qq-upload-button-delete").show(),t.find(".cloudfw-ui-image-preview").show());var p=t.find(".cloudfw-ui-uploader-import"),h=p.length;if(h){var y;p.off("click").on("click",function(e){return e.preventDefault(),y?void y.open():(y=wp.media.frames.file_frame=wp.media({button:{text:jQuery(this).data("uploader_button_text")},multiple:!1,states:[new wp.media.controller.Library({multiple:!0,priority:20,filterable:"eml"})]}),y.on("select",function(){attachment=y.state().get("selection").first().toJSON();var e=attachment.url;a.val(e).change();var r=a.attr("data-to_alt");if(r){var o=attachment.title;o&&jQuery("#"+r,".composer-item.editing").val(o)}i.html("<div class='cloudfw-ui-image-preview'><div class='cloudfw-ui-image-preview-padding'><img src='"+e+"' /></div></div>"),t.find(".qq-upload-button-delete").show(),y.close()}),void y.open())})}}),jQuery(".cloudfw-ui-color",e).each(function(){if(cloudfw_jqueried("cloudfw-color",jQuery(this)))return!0;var e=jQuery(this),t=e.find(".cloudfw-ui-color-handler"),a=e.hasClass("ui-gradient-selector");t.each(function(){var i=jQuery(this),r=i.find(".cloudfw-ui-color-input"),o=i.find(".color-preview");r.ColorPicker({onSubmit:function(t,a,i,u){r.val(a),o.css("backgroundColor","#"+a),e.removeClass("empty"),jQuery(u).ColorPickerHide()},onBeforeShow:function(){jQuery(this).ColorPickerSetColor(this.value)},onChange:function(t,a,i,u){r.val(a).css({"background-color":"#"+a}),e.removeClass("empty"),o.css("backgroundColor","#"+a),r.change()}}).on("keyup focusout",function(){var t=r.val();r.ColorPickerSetColor(t),""!=t?(o.css("backgroundColor","#"+t),e.removeClass("empty")):(o.css("backgroundColor",""),
e.addClass("empty")),r.change()}),o.css("backgroundColor","#"+r.val()).bind("click",function(){r.click().select()}),a?e.find(".remove-color").unbind("click").bind("click",function(a){a.preventDefault();var i=t.find("input"),r=i.first(),o=i.last();""!==o.val()?(o.prev(".color-preview").css("backgroundColor",""),o.val("").change(),""==r.val()&&e.addClass("empty")):(r.prev(".color-preview").css("backgroundColor",""),r.val("").change(),e.addClass("empty"))}):e.find(".remove-color").click(function(t){t.preventDefault(),r.val(""),o.css("backgroundColor",""),e.addClass("empty"),r.change()})})}),jQuery(".cloudfw-ui-custom-uploader",e).each(function(){return cloudfw_jqueried("cloudfw-custom-uploader",jQuery(this))?!0:void jQuery(this).customFileInput()}),jQuery(".fg-button",e).each(function(e){if(cloudfw_jqueried("cloudfw-fg-button",jQuery(this)))return!0;var t=jQuery(this),a=t.attr("data-width")||245;t.ddMenu({content:jQuery(this).prev().html(),showSpeed:100,width:a}),t.hover(function(){jQuery(this).removeClass("ui-state-default").addClass("ui-state-focus")},function(){jQuery(this).removeClass("ui-state-focus").addClass("ui-state-default")})}),sortable_sliders_opacity=.6,jQuery(".cloudfw-ui-sortable, .sortable_sliders, .sortable_ul",e).each(function(){if(cloudfw_jqueried("cloudfw-sortable",jQuery(this)))return!0;var e=jQuery(this),t=e.attr("data-axis");e.is(":ui-sortable")&&jQuery(this).sortable("destroy");var a={};a={opacity:sortable_sliders_opacity,scroll:!0,delay:200,distance:0,start:function(e,t){jQuery(this).sortable("refreshPositions")},update:function(e,t){jQuery(this).children("li").each(function(e,t){jQuery(this).removeClass("first").find(".sort_input").val(e),e++}).first().addClass("first")},stop:function(e,t){}},t&&"undefined"!=typeof t?"x"==t?a.axis="x":"y"==t?a.axis="y":a.axis=!1:a.axis="y",e.sortable(a)}),jQuery(".cloudfw-ui-tabs").find("ul").first().find("a").click(cloudfw_destroy),jQuery(".cloudfw-ui-mini-tabs").children("ul").first().find("a").click(cloudfw_destroy)}jQuery(document).ready(function(){url=jQuery("meta[name=tmpurl]").attr("content"),pfix=jQuery("meta[name=pfix]").attr("content"),cloudfw_nonce=jQuery("meta[name=_wpnonce]").attr("content"),textSending=jQuery("meta[name=textSending]").attr("content")?jQuery("meta[name=textSending]").attr("content"):"Sending...",textSaved=jQuery("meta[name=textSaved]").attr("content")?jQuery("meta[name=textSaved]").attr("content"):"Saved",textUpdate=jQuery("meta[name=textUpdate]").attr("content")?jQuery("meta[name=textUpdate]").attr("content"):"Update",textSendTheEditor=jQuery("meta[name=textSendTheEditor]").attr("content")?jQuery("meta[name=textSendTheEditor]").attr("content"):"Insert Into The Input",cloudfw_init(),cloudfw_main(),cloudfw_panel_height(),cloudfw_tabkey(),cloudfw_fixed_submit(),jQuery("form").attr("novalidate",!0),jQuery(document).on("ajaxSuccess",function(e,t,a){try{var i=jQuery.deparam(a.data);switch(i.action){case"save-widget":case"widgets-order":case"add-menu-item":case"cloudfw_load_dynamic_shortcode_generator":case"cloudfw_load_dynamic_shortcode_generator":case"cloudfw_get_slider_content_forms":cloudfw_main();break;case"menu-locations-save":location.reload()}}catch(r){}})});