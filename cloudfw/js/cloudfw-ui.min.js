var CloudFw_UI,CloudFw_UI_Data={id:"",data:{}};!function(t){"use strict";CloudFw_UI={call:function(t,e){return"function"==typeof t?t.apply(this,e):t},track:function(e){var o=e.attr("id"),l=setInterval(function(){CloudFw_UI_Data.data=t(":input",e).serialize(),CloudFw_UI_Data.id=o,window.onbeforeunload=CloudFw_UI.unloadPage,e.bind("ajaxCallback",function(){CloudFw_UI_Data.data=t(":input",e).serialize()}),clearInterval(l)},10)},unloadPage:function(){return t(":input","#"+CloudFw_UI_Data.id).serialize()!=CloudFw_UI_Data.data?"Unsaved changes will be lost. Really continue?":void 0},sure:{option:{},defaults:{destroy:!0,overlay:!1,height_limit:!1,close_on_resume:!0,compact:!0,id:"cloudfw-box-sure",title:"Are you sure?",texts:{sure:"Delete",cancel:"Cancel"},message:{resuming:""},button_color:{sure:"red",cancel:"grey"},content:"",resume:function(){},load:function(){},cancel:function(){},width:300},init:function(e){CloudFw_UI.sure.option=t.extend(!0,this.defaults,e),CloudFw_UI.sure.option.content&&(CloudFw_UI.sure.option.content='<div class="cloudfw-ui-sure-message">'+CloudFw_UI.sure.option.content+"</div>");var o=' 					<div class="cloudfw-ui-sure"> 						'+CloudFw_UI.sure.option.content+' 						<div class="clear" style="margin-top: 0;"></div> 						<div style="float:left;"> 							<a id="cloudfw-ui-sure-resume" href="javascript:;" class="small-button small-'+CloudFw_UI.sure.option.button_color.sure+' run-the-proceed"> 								<span>'+CloudFw_UI.sure.option.texts.sure+'</span> 							</a> 						</div> 						<div style="float:right; margin-right: -15px;"> 							<a id="cloudfw-ui-sure-not" href="javascript:;" class="small-button small-'+CloudFw_UI.sure.option.button_color.cancel+'"> 								<span>'+CloudFw_UI.sure.option.texts.cancel+'</span> 							</a> 						</div> 						<div class="clear"></div> 					</div> 								',l=CloudFw_UI.modal({destroy:!1,overlay:CloudFw_UI.sure.option.overlay,minimize:!1,compact:CloudFw_UI.sure.option.compact,height_limit:CloudFw_UI.sure.option.height_limit,id:CloudFw_UI.sure.option.id,"class":"cloudfw-box-sure",title:CloudFw_UI.sure.option.title,loader:!1,width:CloudFw_UI.sure.option.width,content:function(t,e){}});"function"!=typeof CloudFw_UI.sure.option.cancel&&(CloudFw_UI.sure.option.cancel=function(t){t.close()});var a=l.get();l.success(o),CloudFw_UI.call(CloudFw_UI.sure.option.load,[l,CloudFw_UI.sure.option]),t("#cloudfw-ui-sure-resume",a).focus().fadeTo(200,.3).delay(50).fadeTo(200,1).on("click",function(){CloudFw_UI.sure.option.message.resuming&&t(this).find("span").text(CloudFw_UI.sure.option.message.resuming),CloudFw_UI.call(CloudFw_UI.sure.option.resume,[l,CloudFw_UI.sure.option]),CloudFw_UI.sure.option.close_on_resume&&l.close()}),t("#cloudfw-ui-sure-not",a).on("click",function(){CloudFw_UI.call(CloudFw_UI.sure.option.cancel,[l,CloudFw_UI.sure.option])})}}}}(jQuery),function(t,e,o,l){var a="__sending",i=function(e,o){this.e=e,this.element=t(e),this.options=o,this.metadata=this.element.data("cloudfw-ui-options")};i.prototype={defaults:{type:"",classes:{"default":"small-sky",success:"small-green",error:"small-red"}},init:function(){return this.option=t.extend({},this.defaults,this.options,this.metadata),this.start(),this},start:function(){var t=this;if(t.type().get_color(),t.element.hasClass("working"))return!0;t.element.addClass("working");var e=this.element.parents("form").first(),o=this.element.attr("data-send-text");t.option.color_class&&(t.option.classes["default"]=t.option.color_class),e.addClass("disabled"),o||(o=CloudFwOp.textSending),"a"==t.option.type?t.element.attr("data-old-val",t.element.children().text()).children().html(o).parent().fadeTo(200,.5):"input"==t.option.type&&t.element.attr("data-old-val",t.element.val()).val(o).parent("div").fadeTo(200,.5)},success:function(){var t=this,e=t.element.parents("form").first(),o=t.element.attr("data-ok-text");o||(o=CloudFwOp.textSaved),"a"==t.option.type?t.element.children().html(o).parent().removeClass(t.option.classes["default"]).addClass(t.option.classes.success).fadeTo(200,1):"input"==t.option.type&&t.element.val(o).parent("div").removeClass(t.option.classes["default"]).addClass(t.option.classes.success).fadeTo(200,1);var l=setInterval(function(){"a"==t.option.type?t.element.children().html(t.element.attr("data-old-val")).removeAttr("data-old-val","").parent().removeClass(t.option.classes.success).addClass(t.option.classes["default"]):"input"==t.option.type&&t.element.val(t.element.attr("data-old-val")).removeAttr("data-old-val").parent("div").removeClass(t.option.classes.success).addClass(t.option.classes["default"]),e.removeClass("disabled"),t.element.removeClass("working"),clearInterval(l)},2e3)},error:function(t){var e=this,o=e.element.parents("form").first(),l=t||e.element.attr("data-error-text");l||(l=CloudFwOp.textError),"a"==e.option.type?e.element.children().html(l).parent().removeClass(e.option.classes["default"]).addClass(e.option.classes.error).fadeTo(200,1):"input"==e.option.type&&e.element.val(l).parent("div").removeClass(e.option.classes["default"]).addClass(e.option.classes.error).fadeTo(200,1);var a=setInterval(function(){"a"==e.option.type?e.element.children().html(e.element.attr("data-old-val")).removeAttr("data-old-val","").parent().removeClass(e.option.classes.error).addClass(e.option.classes["default"]):"input"==e.option.type&&e.element.val(e.element.attr("data-old-val")).removeAttr("data-old-val").parent("div").removeClass(e.option.classes.error).addClass(e.option.classes["default"]),o.removeClass("disabled"),e.element.removeClass("working"),clearInterval(a)},5e3)},type:function(){var t;return t=this.element.is("a")?"a":this.element.is("input")||this.element.is("button")?"input":"a",this.option.type=t,this},get_color:function(){var t;if("a"==this.option.type?t=this.element.attr("class"):"input"==this.option.type&&(t=this.element.parent("div").attr("class")),console.log(this.option.type),t)for(var e=t.split(/\s+/),o=0;o<e.length;++o)if("small-"===e[o].substr(0,6)&&"small-button"!=e[o])return this.option.color_class=e[o],this;return this}},i.defaults=i.prototype.defaults,t.fn[a]=function(e){var o,l=typeof e;return this.first().each(function(){"string"==l?(o=t.data(this,"plugin_"+a),o[e]()):(o=t.data(this,"plugin_"+a),o=o?t.data(this,"plugin_"+a):t.data(this,"plugin_"+a,new i(this,e)),o.init())}),o}}(jQuery,window,document),function(t,e,o,l){var a="modal",i=function(e,o){this.e=e,this.element=t(e),this.options=o,this.metadata=this.element.data("cloudfw-ui-options")};i.prototype={defaults:{destroy:!1,overlay:!1,minimize:!0,height_limit:!0,compact:!1,dummy:!1,width:"",id:"",title:"CloudFw Modal Box",content:function(){},before_close:function(){},toolbar:""},init:function(){return this.option=t.extend({},this.defaults,this.options,this.metadata),this.generate(),this},get:function(){return this.element},loading:function(e){"show"==e?(t(".cloudfw-ui-modal-box-loading",this.element).show(),t(".cloudfw-ui-modal-box-content",this.element).hide()):(t(".cloudfw-ui-modal-box-loading",this.element).hide(),t(".cloudfw-ui-modal-box-content",this.element).show())},success:function(e){this.loading("hide"),t(".cloudfw-ui-modal-box-content",this.element).html(e),this.option.dummy&&t(".cloudfw-ui-modal-box-content",this.element).wrapInner('<form action="#" class="cloudfw-dummy-form" />')},cancel:function(e){this.loading("hide"),e&&t(".cloudfw-ui-modal-box-content",this.element).html(e)},close:function(){t(".cloudfw-ui-modal-box-header-close .close",this.element).click()},toolbar_option:function(e){t(".cloudfw-ui-modal-box-header-options",this.element).remove(),t(".cloudfw-ui-modal-box-header-title",this.element).after(t("<div/>").addClass("cloudfw-ui-modal-box-header-options").html(e))},generate:function(){var e=this;e.option.destroy===!0?t(".cloudfw-ui-modal-box-header-close .close").click():e.option.destroy&&(("object"!=typeof e.option.destroy||"undefined"==typeof e.option.destroy.jquery)&&(e.option.destroy=t(""+e.option.destroy)),e.option.destroy.find(".cloudfw-ui-modal-box-header-close .close").click());var o=this.element.hasClass("generated");if(o)this.element.removeClass("closedSection"),this.element.css({top:"",bottom:"",left:"",right:""}),cloudfw_destroy();else{this.element.addClass("generated"),e.option.overlay&&(modal_overlay=t("<div/>").addClass("cloudfw-ui-modal-overlay").appendTo("body").show());var l=e.element;modal_header_html='<div class="cloudfw-ui-modal-box-header"> 						<div class="cloudfw-ui-modal-box-header-title"><strong>'+e.option.title+"</strong></div> 				",e.option.minimize&&(modal_header_html+=' 							<div class="cloudfw-ui-modal-box-header-minimize"><a href="javascript:;" class="minimize wrapIconSection"><span></span></a></div> 					'),modal_header_html+=' 						<div class="cloudfw-ui-modal-box-header-close"><a href="javascript:;" class="close wrapIconSection"><span></span></a></div> 				',modal_header_html+="</div>",l.html(modal_header_html),modal_content_html="",modal_content=t("<div/>").addClass("cloudfw-ui-modal-box-content postbox").html(modal_content_html).appendTo(l),modal_header=l.find(".cloudfw-ui-modal-box-header"),e.option.compact&&l.addClass("modal-compact"),e.option["class"]&&l.addClass(e.option["class"]),e.option.width&&(modal_content.css({width:e.option.width}),l.css({marginLeft:-(l.width()/2)})),e.option.height_limit&&modal_content.addClass("limit"),l.draggable({handle:l.find(".cloudfw-ui-modal-box-header"),start:function(e,o){var l=t(this);l.css("bottom","auto").css("right","auto")}}),modal_header.find("a.minimize").unbind("click").bind("click",function(){var o=t(this).parents(".cloudfw-ui-modal-box").first(),l=t(".cloudfw-ui-modal-box-content",o),a=t(".cloudfw-ui-modal-overlay");o.hasClass("closedSection")?(l.slideDown(),e.option.overlay&&a.hide().fadeTo(500,.8,function(){t(this).show()}),o.removeClass("closedSection")):(l.slideUp(),e.option.overlay&&a.fadeOut(function(){t(this).hide()}),o.addClass("closedSection")),cloudfw_destroy()}),modal_header.find("a.close").unbind("click").bind("click",function(){e.option.before_close&&CloudFw_UI.call(e.option.before_close,[l,modal_content]),l.remove(),e.option.overlay&&modal_overlay.fadeOut(function(){t(this).remove()}),t.removeData(e.e,"cloudfw_plugin_"+a),t.removeData(e.e),cloudfw_destroy()}),e.option.loader&&(modal_loader=t("<div />").addClass("cloudfw-ui-modal-box-loading").addClass("loading"),modal_content.after(modal_loader),this.loading("show"),modal_loader.css({width:e.option.width}),l.css({marginLeft:-(l.width()/2)})),e.option.content&&CloudFw_UI.call(this.option.content,[l,modal_content,e])}return this.element}};var n=function(){t(".cloudfw-ui-modal-box-header-close .close").click()};i.defaults=i.prototype.defaults,CloudFw_UI[a]=function(e){var o,l=typeof e,s=t("#"+e.id),d=s.length;return"string"==l?o?o[e]():"destroy"==e&&n():(d||(s=t("<div/>").attr("id",e.id).addClass("cloudfw-ui-modal-box").appendTo("body")),o=t.data(s[0],"cloudfw_plugin_"+a),o=o?t.data(s[0],"cloudfw_plugin_"+a):t.data(s[0],"cloudfw_plugin_"+a,new i(s[0],e)),o.init()),o}}(jQuery,window,document);